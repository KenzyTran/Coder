{"ast":null,"code":"import { ElMessage } from 'element-plus';\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      transactions: [],\n      ignoreNegativeBalances: false,\n      userId: 'user123',\n      currentFile: null\n    };\n  },\n  computed: {\n    hasNegativeBalances() {\n      return this.transactions.some(t => t.runningBalance < 0);\n    },\n    negativeBalanceTransactions() {\n      const symbols = [...new Set(this.transactions.filter(t => t.runningBalance < 0).map(t => t.symbol))];\n      return symbols.map(symbol => {\n        const transactions = this.getTransactionsForSymbol(symbol);\n        const lastTransaction = transactions[transactions.length - 1];\n        return {\n          symbol,\n          runningBalance: lastTransaction.runningBalance,\n          transactions\n        };\n      });\n    }\n  },\n  methods: {\n    beforeUpload(file) {\n      const isCSVOrXLSX = file.type.includes('csv') || file.type.includes('sheet');\n      if (!isCSVOrXLSX) {\n        ElMessage.error('Chỉ hỗ trợ file CSV/XLSX');\n        return false;\n      }\n      this.currentFile = file;\n      return true;\n    },\n    handleFileSuccess(response, file) {\n      this.currentFile = file;\n      this.transactions = response.map((transaction, index) => {\n        const totalAmount = transaction.price * transaction.volume;\n        const feeRate = transaction.fee / totalAmount;\n        const taxRate = transaction.type === 'SELL' ? transaction.tax / totalAmount : null;\n        return {\n          ...transaction,\n          rowIndex: index + 1,\n          feeRate,\n          taxRate\n        };\n      });\n      this.ignoreNegativeBalances = false;\n    },\n    handleFileError(error) {\n      console.error('Upload error:', error);\n      const errorMessage = error.response?.data?.error || 'Có lỗi xảy ra khi xử lý file.';\n      ElMessage.error(errorMessage);\n      this.currentFile = null;\n    },\n    handleFileRemove() {\n      this.currentFile = null;\n      this.transactions = [];\n      this.ignoreNegativeBalances = false;\n      ElMessage.success('Đã xóa file');\n    },\n    formatFileSize(bytes) {\n      if (bytes === 0) return '0 B';\n      const k = 1024;\n      const sizes = ['B', 'KB', 'MB', 'GB'];\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n    },\n    async importTransactions() {\n      try {\n        console.log('Starting import with data:', {\n          transactionCount: this.transactions.length,\n          ignoreNegativeBalances: this.ignoreNegativeBalances,\n          userId: this.userId,\n          sampleTransaction: this.transactions[0]\n        });\n        const {\n          data\n        } = await axios.post('/api/transactions/import', {\n          transactions: this.transactions,\n          userId: this.userId,\n          ignoreNegativeBalances: this.ignoreNegativeBalances\n        });\n        console.log('Import response:', data);\n        if (data.errors.length === 0) {\n          ElMessage.success(`✅ Import thành công ${data.success} giao dịch.`);\n          this.transactions = []; // Clear the table after successful import\n        } else {\n          console.error('Import errors:', data.errors);\n          data.errors.forEach(error => {\n            const transaction = this.transactions[error.index];\n            ElMessage.error(`❌ Lỗi ở dòng ${error.index + 1} (${transaction.symbol}): ${error.error}`);\n          });\n        }\n      } catch (error) {\n        console.error('Import error details:', {\n          message: error.message,\n          response: error.response?.data,\n          status: error.response?.status\n        });\n        const errorMessage = error.response?.data?.error || error.response?.data?.details || error.message || 'Failed to import transactions.';\n        ElMessage.error(`❌ Lỗi import: ${errorMessage}`);\n      }\n    },\n    getBalanceClass({\n      row\n    }) {\n      return row.runningBalance < 0 ? 'negative-balance' : '';\n    },\n    getTransactionsForSymbol(symbol) {\n      return this.transactions.filter(t => t.symbol === symbol).sort((a, b) => new Date(a.tradeDate) - new Date(b.tradeDate));\n    },\n    formatPrice(price) {\n      return (price / 1000).toLocaleString('vi-VN', {\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 2\n      });\n    },\n    formatPercentage(value) {\n      if (!value) return '-';\n      return `${(value * 100).toLocaleString('vi-VN', {\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 2\n      })}%`;\n    }\n  }\n};","map":{"version":3,"names":["ElMessage","axios","data","transactions","ignoreNegativeBalances","userId","currentFile","computed","hasNegativeBalances","some","t","runningBalance","negativeBalanceTransactions","symbols","Set","filter","map","symbol","getTransactionsForSymbol","lastTransaction","length","methods","beforeUpload","file","isCSVOrXLSX","type","includes","error","handleFileSuccess","response","transaction","index","totalAmount","price","volume","feeRate","fee","taxRate","tax","rowIndex","handleFileError","console","errorMessage","handleFileRemove","success","formatFileSize","bytes","k","sizes","i","Math","floor","log","parseFloat","pow","toFixed","importTransactions","transactionCount","sampleTransaction","post","errors","forEach","message","status","details","getBalanceClass","row","sort","a","b","Date","tradeDate","formatPrice","toLocaleString","minimumFractionDigits","maximumFractionDigits","formatPercentage","value"],"sources":["/home/kiet/projects/agents/3_crew/engineering_team/frontend/src/components/TransactionUploader.vue"],"sourcesContent":["<template>\n  <div class=\"transaction-uploader\">\n    <div class=\"upload-section\">\n      <div v-if=\"!currentFile\" class=\"upload-area\">\n        <el-upload\n          class=\"upload-demo\"\n          drag\n          action=\"/api/transactions/upload\"\n          :show-file-list=\"false\"\n          accept=\".csv,.xlsx\"\n          :before-upload=\"beforeUpload\"\n          :on-success=\"handleFileSuccess\"\n          :on-error=\"handleFileError\"\n          :data=\"{ userId: 'user123' }\">\n          <i class=\"el-icon-upload\"></i>\n          <div class=\"el-upload__text\">Kéo thả file CSV/XLSX vào đây hoặc <em>click để chọn file</em></div>\n          <div class=\"el-upload__tip\">Chỉ hỗ trợ file CSV/XLSX</div>\n        </el-upload>\n      </div>\n\n      <div v-else class=\"file-info\">\n        <el-alert\n          :title=\"`File đã chọn: ${currentFile.name}`\"\n          type=\"success\"\n          :closable=\"false\"\n          show-icon>\n          <template #default>\n            <div class=\"file-actions\">\n              <span class=\"file-size\">{{ formatFileSize(currentFile.size) }}</span>\n              <el-button \n                type=\"danger\" \n                size=\"small\" \n                @click=\"handleFileRemove\"\n                icon=\"Delete\">\n                Xóa file\n              </el-button>\n            </div>\n          </template>\n        </el-alert>\n      </div>\n    </div>\n\n    <div v-if=\"transactions.length > 0\" class=\"transactions-section\">\n      <!-- Main transactions table -->\n      <div class=\"section-header\">\n        <h3>Danh sách giao dịch</h3>\n        <el-button \n          type=\"primary\" \n          size=\"large\"\n          @click=\"importTransactions\" \n          :disabled=\"transactions.length === 0 || (hasNegativeBalances && !ignoreNegativeBalances)\">\n          Import Giao Dịch\n        </el-button>\n      </div>\n\n      <el-table\n        :data=\"transactions\"\n        style=\"width: 100%; margin-bottom: 20px\"\n        border>\n        <el-table-column type=\"index\" label=\"#\" width=\"50\"></el-table-column>\n        <el-table-column prop=\"tradeDate\" label=\"Ngày GD\"></el-table-column>\n        <el-table-column prop=\"symbol\" label=\"Mã CK\"></el-table-column>\n        <el-table-column prop=\"type\" label=\"Loại GD\"></el-table-column>\n        <el-table-column prop=\"volume\" label=\"Khối lượng\"></el-table-column>\n        <el-table-column label=\"Giá (nghìn đồng)\">\n          <template #default=\"scope\">\n            {{ formatPrice(scope.row.price) }}\n          </template>\n        </el-table-column>\n        <el-table-column label=\"Tỷ lệ phí\">\n          <template #default=\"scope\">\n            {{ formatPercentage(scope.row.feeRate) }}\n          </template>\n        </el-table-column>\n        <el-table-column label=\"Tỷ lệ thuế\">\n          <template #default=\"scope\">\n            {{ scope.row.type === 'SELL' ? formatPercentage(scope.row.taxRate) : '-' }}\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"runningBalance\"\n          label=\"Running Balance\"\n          :cell-class-name=\"getBalanceClass\">\n        </el-table-column>\n      </el-table>\n\n      <!-- Negative balance warning table -->\n      <div v-if=\"hasNegativeBalances\" class=\"negative-balance-warning\">\n        <el-alert\n          title=\"Cảnh báo: Có giao dịch dẫn đến số dư âm\"\n          type=\"warning\"\n          :closable=\"false\"\n          show-icon>\n          <template #default>\n            <p>Vui lòng kiểm tra các giao dịch sau:</p>\n          </template>\n        </el-alert>\n\n        <el-table\n          :data=\"negativeBalanceTransactions\"\n          style=\"width: 100%; margin: 10px 0 20px 0\"\n          border>\n          <el-table-column type=\"index\" label=\"#\" width=\"50\"></el-table-column>\n          <el-table-column prop=\"symbol\" label=\"Mã CK\"></el-table-column>\n          <el-table-column prop=\"runningBalance\" label=\"Số dư cuối\"></el-table-column>\n          <el-table-column label=\"Chi tiết giao dịch\">\n            <template #default=\"scope\">\n              <el-table\n                :data=\"getTransactionsForSymbol(scope.row.symbol)\"\n                style=\"width: 100%\"\n                size=\"small\">\n                <el-table-column prop=\"tradeDate\" label=\"Ngày GD\" width=\"120\"></el-table-column>\n                <el-table-column prop=\"type\" label=\"Loại GD\" width=\"100\"></el-table-column>\n                <el-table-column prop=\"volume\" label=\"Khối lượng\" width=\"100\"></el-table-column>\n                <el-table-column label=\"Giá (nghìn đồng)\" width=\"120\">\n                  <template #default=\"scope\">\n                    {{ formatPrice(scope.row.price) }}\n                  </template>\n                </el-table-column>\n              </el-table>\n            </template>\n          </el-table-column>\n        </el-table>\n\n        <el-checkbox v-model=\"ignoreNegativeBalances\" style=\"margin-bottom: 20px\">\n          Bỏ qua cảnh báo số dư âm và tiếp tục import\n        </el-checkbox>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ElMessage } from 'element-plus';\nimport axios from 'axios';\n\nexport default {\n  data() {\n    return {\n      transactions: [],\n      ignoreNegativeBalances: false,\n      userId: 'user123',\n      currentFile: null\n    };\n  },\n  computed: {\n    hasNegativeBalances() {\n      return this.transactions.some(t => t.runningBalance < 0);\n    },\n    negativeBalanceTransactions() {\n      const symbols = [...new Set(this.transactions\n        .filter(t => t.runningBalance < 0)\n        .map(t => t.symbol))];\n      \n      return symbols.map(symbol => {\n        const transactions = this.getTransactionsForSymbol(symbol);\n        const lastTransaction = transactions[transactions.length - 1];\n        return {\n          symbol,\n          runningBalance: lastTransaction.runningBalance,\n          transactions\n        };\n      });\n    }\n  },\n  methods: {\n    beforeUpload(file) {\n      const isCSVOrXLSX = file.type.includes('csv') || file.type.includes('sheet');\n      if (!isCSVOrXLSX) {\n        ElMessage.error('Chỉ hỗ trợ file CSV/XLSX');\n        return false;\n      }\n      this.currentFile = file;\n      return true;\n    },\n    handleFileSuccess(response, file) {\n      this.currentFile = file;\n      this.transactions = response.map((transaction, index) => {\n        const totalAmount = transaction.price * transaction.volume;\n        const feeRate = transaction.fee / totalAmount;\n        const taxRate = transaction.type === 'SELL' ? transaction.tax / totalAmount : null;\n\n        return {\n          ...transaction,\n          rowIndex: index + 1,\n          feeRate,\n          taxRate\n        };\n      });\n      this.ignoreNegativeBalances = false;\n    },\n    handleFileError(error) {\n      console.error('Upload error:', error);\n      const errorMessage = error.response?.data?.error || 'Có lỗi xảy ra khi xử lý file.';\n      ElMessage.error(errorMessage);\n      this.currentFile = null;\n    },\n    handleFileRemove() {\n      this.currentFile = null;\n      this.transactions = [];\n      this.ignoreNegativeBalances = false;\n      ElMessage.success('Đã xóa file');\n    },\n    formatFileSize(bytes) {\n      if (bytes === 0) return '0 B';\n      const k = 1024;\n      const sizes = ['B', 'KB', 'MB', 'GB'];\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n    },\n    async importTransactions() {\n      try {\n        console.log('Starting import with data:', {\n          transactionCount: this.transactions.length,\n          ignoreNegativeBalances: this.ignoreNegativeBalances,\n          userId: this.userId,\n          sampleTransaction: this.transactions[0]\n        });\n\n        const { data } = await axios.post('/api/transactions/import', {\n          transactions: this.transactions,\n          userId: this.userId,\n          ignoreNegativeBalances: this.ignoreNegativeBalances\n        });\n        \n        console.log('Import response:', data);\n        \n        if (data.errors.length === 0) {\n          ElMessage.success(`✅ Import thành công ${data.success} giao dịch.`);\n          this.transactions = []; // Clear the table after successful import\n        } else {\n          console.error('Import errors:', data.errors);\n          data.errors.forEach((error) => {\n            const transaction = this.transactions[error.index];\n            ElMessage.error(\n              `❌ Lỗi ở dòng ${error.index + 1} (${transaction.symbol}): ${error.error}`\n            );\n          });\n        }\n      } catch (error) {\n        console.error('Import error details:', {\n          message: error.message,\n          response: error.response?.data,\n          status: error.response?.status\n        });\n        \n        const errorMessage = error.response?.data?.error || \n                           error.response?.data?.details || \n                           error.message || \n                           'Failed to import transactions.';\n        \n        ElMessage.error(`❌ Lỗi import: ${errorMessage}`);\n      }\n    },\n    getBalanceClass({ row }) {\n      return row.runningBalance < 0 ? 'negative-balance' : '';\n    },\n    getTransactionsForSymbol(symbol) {\n      return this.transactions\n        .filter(t => t.symbol === symbol)\n        .sort((a, b) => new Date(a.tradeDate) - new Date(b.tradeDate));\n    },\n    formatPrice(price) {\n      return (price / 1000).toLocaleString('vi-VN', {\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 2\n      });\n    },\n    formatPercentage(value) {\n      if (!value) return '-';\n      return `${(value * 100).toLocaleString('vi-VN', {\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 2\n      })}%`;\n    }\n  }\n};\n</script>\n\n<style scoped>\n.transaction-uploader {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\n.upload-section {\n  margin-bottom: 30px;\n}\n\n.upload-area {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n  transition: border-color 0.3s;\n}\n\n.upload-area:hover {\n  border-color: #409eff;\n}\n\n.upload-demo {\n  width: 100%;\n}\n\n.el-upload__text {\n  font-size: 16px;\n  color: #606266;\n  margin: 10px 0;\n}\n\n.el-upload__tip {\n  font-size: 13px;\n  color: #909399;\n  margin-top: 8px;\n}\n\n.file-info {\n  margin-top: 15px;\n}\n\n.file-actions {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 8px;\n}\n\n.file-size {\n  color: #606266;\n  font-size: 13px;\n}\n\n.transactions-section {\n  background: #fff;\n  border-radius: 8px;\n  padding: 20px;\n  box-shadow: 0 2px 12px 0 rgba(0,0,0,0.1);\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n  padding-bottom: 15px;\n  border-bottom: 1px solid #ebeef5;\n}\n\n.section-header h3 {\n  margin: 0;\n  color: #303133;\n  font-size: 18px;\n}\n\n.negative-balance {\n  background-color: #fff2f0;\n  color: #f56c6c;\n}\n\n.negative-balance-warning {\n  margin: 20px 0;\n  padding: 15px;\n  border: 1px solid #e6a23c;\n  border-radius: 4px;\n  background-color: #fdf6ec;\n}\n\n/* Responsive styles */\n@media (max-width: 768px) {\n  .section-header {\n    flex-direction: column;\n    gap: 10px;\n  }\n  \n  .section-header .el-button {\n    width: 100%;\n  }\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}