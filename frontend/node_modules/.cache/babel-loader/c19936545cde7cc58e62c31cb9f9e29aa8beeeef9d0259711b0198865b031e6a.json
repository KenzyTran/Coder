{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"transaction-uploader\"\n};\nconst _hoisted_2 = {\n  class: \"upload-section\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"upload-area\"\n};\nconst _hoisted_4 = {\n  class: \"upload-content\"\n};\nconst _hoisted_5 = {\n  class: \"upload-text\"\n};\nconst _hoisted_6 = {\n  key: 1,\n  class: \"file-info\"\n};\nconst _hoisted_7 = {\n  class: \"file-actions\"\n};\nconst _hoisted_8 = {\n  class: \"file-size\"\n};\nconst _hoisted_9 = {\n  key: 0,\n  class: \"transactions-section\"\n};\nconst _hoisted_10 = {\n  class: \"section-header\"\n};\nconst _hoisted_11 = {\n  key: 0,\n  class: \"negative-balance-warning\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_upload = _resolveComponent(\"el-upload\");\n  const _component_el_alert = _resolveComponent(\"el-alert\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_checkbox = _resolveComponent(\"el-checkbox\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [!$data.currentFile ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createVNode(_component_el_upload, {\n    class: \"upload-demo\",\n    drag: \"\",\n    action: \"/api/transactions/upload\",\n    \"show-file-list\": false,\n    accept: \".csv,.xlsx\",\n    \"before-upload\": $options.beforeUpload,\n    \"on-success\": $options.handleFileSuccess,\n    \"on-error\": $options.handleFileError,\n    data: {\n      userId: 'user123'\n    }\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_4, [_cache[4] || (_cache[4] = _createElementVNode(\"i\", {\n      class: \"el-icon-upload upload-icon\"\n    }, null, -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_5, [_cache[2] || (_cache[2] = _createElementVNode(\"div\", {\n      class: \"main-text\"\n    }, \"Kéo thả file CSV/XLSX vào đây\", -1 /* HOISTED */)), _cache[3] || (_cache[3] = _createElementVNode(\"div\", {\n      class: \"sub-text\"\n    }, \"hoặc\", -1 /* HOISTED */)), _createVNode(_component_el_button, {\n      type: \"primary\",\n      class: \"select-button\"\n    }, {\n      default: _withCtx(() => _cache[1] || (_cache[1] = [_createTextVNode(\"Chọn file\")])),\n      _: 1 /* STABLE */,\n      __: [1]\n    })]), _cache[5] || (_cache[5] = _createElementVNode(\"div\", {\n      class: \"upload-tip\"\n    }, [_createElementVNode(\"i\", {\n      class: \"el-icon-info\"\n    }), _createElementVNode(\"span\", null, \"Chỉ hỗ trợ file CSV/XLSX\")], -1 /* HOISTED */)), _cache[6] || (_cache[6] = _createElementVNode(\"div\", {\n      class: \"template-link\"\n    }, [_createElementVNode(\"i\", {\n      class: \"el-icon-document\"\n    }), _createElementVNode(\"a\", {\n      href: \"https://docs.google.com/spreadsheets/d/15SqeWc1Yp10TXqMn0SDFufrLte0kBud6fvhdjtIoUmI/edit?gid=0#gid=0\",\n      target: \"_blank\",\n      rel: \"noopener noreferrer\"\n    }, \" Tải file mẫu để điền thông tin giao dịch \")], -1 /* HOISTED */))])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"before-upload\", \"on-success\", \"on-error\"])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_createVNode(_component_el_alert, {\n    title: `File đã chọn: ${$data.currentFile.name}`,\n    type: \"success\",\n    closable: false,\n    \"show-icon\": \"\"\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"span\", _hoisted_8, _toDisplayString($options.formatFileSize($data.currentFile.size)), 1 /* TEXT */), _createVNode(_component_el_button, {\n      type: \"danger\",\n      size: \"small\",\n      onClick: $options.handleFileRemove,\n      icon: \"Delete\"\n    }, {\n      default: _withCtx(() => _cache[7] || (_cache[7] = [_createTextVNode(\" Xóa file \")])),\n      _: 1 /* STABLE */,\n      __: [7]\n    }, 8 /* PROPS */, [\"onClick\"])])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"title\"])]))]), $data.transactions.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_createCommentVNode(\" Main transactions table \"), _createElementVNode(\"div\", _hoisted_10, [_cache[9] || (_cache[9] = _createElementVNode(\"h3\", null, \"Danh sách giao dịch\", -1 /* HOISTED */)), _createVNode(_component_el_button, {\n    type: \"primary\",\n    size: \"large\",\n    onClick: $options.importTransactions,\n    disabled: $data.transactions.length === 0 || $options.hasNegativeBalances && !$data.ignoreNegativeBalances\n  }, {\n    default: _withCtx(() => _cache[8] || (_cache[8] = [_createTextVNode(\" Import Giao Dịch \")])),\n    _: 1 /* STABLE */,\n    __: [8]\n  }, 8 /* PROPS */, [\"onClick\", \"disabled\"])]), _createVNode(_component_el_table, {\n    data: $data.transactions,\n    style: {\n      \"width\": \"100%\",\n      \"margin-bottom\": \"20px\"\n    },\n    border: \"\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_table_column, {\n      type: \"index\",\n      label: \"#\",\n      width: \"50\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"tradeDate\",\n      label: \"Ngày GD\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"symbol\",\n      label: \"Mã CK\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"type\",\n      label: \"Loại GD\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"volume\",\n      label: \"Khối lượng\"\n    }), _createVNode(_component_el_table_column, {\n      label: \"Giá (nghìn đồng)\"\n    }, {\n      default: _withCtx(scope => [_createTextVNode(_toDisplayString($options.formatPrice(scope.row.price)), 1 /* TEXT */)]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      label: \"Tỷ lệ phí\"\n    }, {\n      default: _withCtx(scope => [_createTextVNode(_toDisplayString($options.formatPercentage(scope.row.feeRate)), 1 /* TEXT */)]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      label: \"Tỷ lệ thuế\"\n    }, {\n      default: _withCtx(scope => [_createTextVNode(_toDisplayString(scope.row.type === 'SELL' ? $options.formatPercentage(scope.row.taxRate) : '-'), 1 /* TEXT */)]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      prop: \"runningBalance\",\n      label: \"Running Balance\",\n      \"cell-class-name\": $options.getBalanceClass\n    }, null, 8 /* PROPS */, [\"cell-class-name\"])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"data\"]), _createCommentVNode(\" Negative balance warning table \"), $options.hasNegativeBalances ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [_createVNode(_component_el_alert, {\n    title: \"Cảnh báo: Có giao dịch dẫn đến số dư âm\",\n    type: \"warning\",\n    closable: false,\n    \"show-icon\": \"\"\n  }, {\n    default: _withCtx(() => _cache[10] || (_cache[10] = [_createElementVNode(\"p\", null, \"Vui lòng kiểm tra các giao dịch sau:\", -1 /* HOISTED */)])),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_el_table, {\n    data: $options.negativeBalanceTransactions,\n    style: {\n      \"width\": \"100%\",\n      \"margin\": \"10px 0 20px 0\"\n    },\n    border: \"\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_table_column, {\n      type: \"index\",\n      label: \"#\",\n      width: \"50\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"symbol\",\n      label: \"Mã CK\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"runningBalance\",\n      label: \"Số dư cuối\"\n    }), _createVNode(_component_el_table_column, {\n      label: \"Chi tiết giao dịch\"\n    }, {\n      default: _withCtx(scope => [_createVNode(_component_el_table, {\n        data: $options.getTransactionsForSymbol(scope.row.symbol),\n        style: {\n          \"width\": \"100%\"\n        },\n        size: \"small\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_table_column, {\n          prop: \"tradeDate\",\n          label: \"Ngày GD\",\n          width: \"120\"\n        }), _createVNode(_component_el_table_column, {\n          prop: \"type\",\n          label: \"Loại GD\",\n          width: \"100\"\n        }), _createVNode(_component_el_table_column, {\n          prop: \"volume\",\n          label: \"Khối lượng\",\n          width: \"100\"\n        }), _createVNode(_component_el_table_column, {\n          label: \"Giá (nghìn đồng)\",\n          width: \"120\"\n        }, {\n          default: _withCtx(scope => [_createTextVNode(_toDisplayString($options.formatPrice(scope.row.price)), 1 /* TEXT */)]),\n          _: 2 /* DYNAMIC */\n        }, 1024 /* DYNAMIC_SLOTS */)]),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"data\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"data\"]), _createVNode(_component_el_checkbox, {\n    modelValue: $data.ignoreNegativeBalances,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.ignoreNegativeBalances = $event),\n    style: {\n      \"margin-bottom\": \"20px\"\n    }\n  }, {\n    default: _withCtx(() => _cache[11] || (_cache[11] = [_createTextVNode(\" Bỏ qua cảnh báo số dư âm và tiếp tục import \")])),\n    _: 1 /* STABLE */,\n    __: [11]\n  }, 8 /* PROPS */, [\"modelValue\"])])) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","$data","currentFile","_hoisted_3","_createVNode","_component_el_upload","drag","action","accept","$options","beforeUpload","handleFileSuccess","handleFileError","data","userId","default","_withCtx","_hoisted_4","_hoisted_5","_component_el_button","type","_cache","_createTextVNode","_","__","href","target","rel","_hoisted_6","_component_el_alert","title","name","closable","_hoisted_7","_hoisted_8","_toDisplayString","formatFileSize","size","onClick","handleFileRemove","icon","transactions","length","_hoisted_9","_createCommentVNode","_hoisted_10","importTransactions","disabled","hasNegativeBalances","ignoreNegativeBalances","_component_el_table","style","border","_component_el_table_column","label","width","prop","scope","formatPrice","row","price","formatPercentage","feeRate","taxRate","getBalanceClass","_hoisted_11","negativeBalanceTransactions","getTransactionsForSymbol","symbol","_component_el_checkbox","modelValue","$event"],"sources":["/home/kiet/projects/agents/3_crew/engineering_team/frontend/src/components/TransactionUploader.vue"],"sourcesContent":["<template>\n  <div class=\"transaction-uploader\">\n    <div class=\"upload-section\">\n      <div v-if=\"!currentFile\" class=\"upload-area\">\n        <el-upload\n          class=\"upload-demo\"\n          drag\n          action=\"/api/transactions/upload\"\n          :show-file-list=\"false\"\n          accept=\".csv,.xlsx\"\n          :before-upload=\"beforeUpload\"\n          :on-success=\"handleFileSuccess\"\n          :on-error=\"handleFileError\"\n          :data=\"{ userId: 'user123' }\">\n          <div class=\"upload-content\">\n            <i class=\"el-icon-upload upload-icon\"></i>\n            <div class=\"upload-text\">\n              <div class=\"main-text\">Kéo thả file CSV/XLSX vào đây</div>\n              <div class=\"sub-text\">hoặc</div>\n              <el-button type=\"primary\" class=\"select-button\">Chọn file</el-button>\n            </div>\n            <div class=\"upload-tip\">\n              <i class=\"el-icon-info\"></i>\n              <span>Chỉ hỗ trợ file CSV/XLSX</span>\n            </div>\n            <div class=\"template-link\">\n              <i class=\"el-icon-document\"></i>\n              <a \n                href=\"https://docs.google.com/spreadsheets/d/15SqeWc1Yp10TXqMn0SDFufrLte0kBud6fvhdjtIoUmI/edit?gid=0#gid=0\" \n                target=\"_blank\"\n                rel=\"noopener noreferrer\">\n                Tải file mẫu để điền thông tin giao dịch\n              </a>\n            </div>\n          </div>\n        </el-upload>\n      </div>\n\n      <div v-else class=\"file-info\">\n        <el-alert\n          :title=\"`File đã chọn: ${currentFile.name}`\"\n          type=\"success\"\n          :closable=\"false\"\n          show-icon>\n          <template #default>\n            <div class=\"file-actions\">\n              <span class=\"file-size\">{{ formatFileSize(currentFile.size) }}</span>\n              <el-button \n                type=\"danger\" \n                size=\"small\" \n                @click=\"handleFileRemove\"\n                icon=\"Delete\">\n                Xóa file\n              </el-button>\n            </div>\n          </template>\n        </el-alert>\n      </div>\n    </div>\n\n    <div v-if=\"transactions.length > 0\" class=\"transactions-section\">\n      <!-- Main transactions table -->\n      <div class=\"section-header\">\n        <h3>Danh sách giao dịch</h3>\n        <el-button \n          type=\"primary\" \n          size=\"large\"\n          @click=\"importTransactions\" \n          :disabled=\"transactions.length === 0 || (hasNegativeBalances && !ignoreNegativeBalances)\">\n          Import Giao Dịch\n        </el-button>\n      </div>\n\n      <el-table\n        :data=\"transactions\"\n        style=\"width: 100%; margin-bottom: 20px\"\n        border>\n        <el-table-column type=\"index\" label=\"#\" width=\"50\"></el-table-column>\n        <el-table-column prop=\"tradeDate\" label=\"Ngày GD\"></el-table-column>\n        <el-table-column prop=\"symbol\" label=\"Mã CK\"></el-table-column>\n        <el-table-column prop=\"type\" label=\"Loại GD\"></el-table-column>\n        <el-table-column prop=\"volume\" label=\"Khối lượng\"></el-table-column>\n        <el-table-column label=\"Giá (nghìn đồng)\">\n          <template #default=\"scope\">\n            {{ formatPrice(scope.row.price) }}\n          </template>\n        </el-table-column>\n        <el-table-column label=\"Tỷ lệ phí\">\n          <template #default=\"scope\">\n            {{ formatPercentage(scope.row.feeRate) }}\n          </template>\n        </el-table-column>\n        <el-table-column label=\"Tỷ lệ thuế\">\n          <template #default=\"scope\">\n            {{ scope.row.type === 'SELL' ? formatPercentage(scope.row.taxRate) : '-' }}\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"runningBalance\"\n          label=\"Running Balance\"\n          :cell-class-name=\"getBalanceClass\">\n        </el-table-column>\n      </el-table>\n\n      <!-- Negative balance warning table -->\n      <div v-if=\"hasNegativeBalances\" class=\"negative-balance-warning\">\n        <el-alert\n          title=\"Cảnh báo: Có giao dịch dẫn đến số dư âm\"\n          type=\"warning\"\n          :closable=\"false\"\n          show-icon>\n          <template #default>\n            <p>Vui lòng kiểm tra các giao dịch sau:</p>\n          </template>\n        </el-alert>\n\n        <el-table\n          :data=\"negativeBalanceTransactions\"\n          style=\"width: 100%; margin: 10px 0 20px 0\"\n          border>\n          <el-table-column type=\"index\" label=\"#\" width=\"50\"></el-table-column>\n          <el-table-column prop=\"symbol\" label=\"Mã CK\"></el-table-column>\n          <el-table-column prop=\"runningBalance\" label=\"Số dư cuối\"></el-table-column>\n          <el-table-column label=\"Chi tiết giao dịch\">\n            <template #default=\"scope\">\n              <el-table\n                :data=\"getTransactionsForSymbol(scope.row.symbol)\"\n                style=\"width: 100%\"\n                size=\"small\">\n                <el-table-column prop=\"tradeDate\" label=\"Ngày GD\" width=\"120\"></el-table-column>\n                <el-table-column prop=\"type\" label=\"Loại GD\" width=\"100\"></el-table-column>\n                <el-table-column prop=\"volume\" label=\"Khối lượng\" width=\"100\"></el-table-column>\n                <el-table-column label=\"Giá (nghìn đồng)\" width=\"120\">\n                  <template #default=\"scope\">\n                    {{ formatPrice(scope.row.price) }}\n                  </template>\n                </el-table-column>\n              </el-table>\n            </template>\n          </el-table-column>\n        </el-table>\n\n        <el-checkbox v-model=\"ignoreNegativeBalances\" style=\"margin-bottom: 20px\">\n          Bỏ qua cảnh báo số dư âm và tiếp tục import\n        </el-checkbox>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ElMessage } from 'element-plus';\nimport axios from 'axios';\n\nexport default {\n  data() {\n    return {\n      transactions: [],\n      ignoreNegativeBalances: false,\n      userId: 'user123',\n      currentFile: null\n    };\n  },\n  computed: {\n    hasNegativeBalances() {\n      return this.transactions.some(t => t.runningBalance < 0);\n    },\n    negativeBalanceTransactions() {\n      const symbols = [...new Set(this.transactions\n        .filter(t => t.runningBalance < 0)\n        .map(t => t.symbol))];\n      \n      return symbols.map(symbol => {\n        const transactions = this.getTransactionsForSymbol(symbol);\n        const lastTransaction = transactions[transactions.length - 1];\n        return {\n          symbol,\n          runningBalance: lastTransaction.runningBalance,\n          transactions\n        };\n      });\n    }\n  },\n  methods: {\n    beforeUpload(file) {\n      const isCSVOrXLSX = file.type.includes('csv') || file.type.includes('sheet');\n      if (!isCSVOrXLSX) {\n        ElMessage.error('Chỉ hỗ trợ file CSV/XLSX');\n        return false;\n      }\n      this.currentFile = file;\n      return true;\n    },\n    handleFileSuccess(response, file) {\n      this.currentFile = file;\n      this.transactions = response.map((transaction, index) => {\n        const totalAmount = transaction.price * transaction.volume;\n        const feeRate = transaction.fee / totalAmount;\n        const taxRate = transaction.type === 'SELL' ? (transaction.tax / totalAmount) : 0;\n\n        return {\n          ...transaction,\n          rowIndex: index + 1,\n          feeRate,\n          taxRate\n        };\n      });\n      this.ignoreNegativeBalances = false;\n    },\n    handleFileError(error) {\n      console.error('Upload error:', error);\n      const errorMessage = error.response?.data?.error || 'Có lỗi xảy ra khi xử lý file.';\n      ElMessage.error(errorMessage);\n      this.currentFile = null;\n    },\n    handleFileRemove() {\n      this.currentFile = null;\n      this.transactions = [];\n      this.ignoreNegativeBalances = false;\n      ElMessage.success('Đã xóa file');\n    },\n    formatFileSize(bytes) {\n      if (bytes === 0) return '0 B';\n      const k = 1024;\n      const sizes = ['B', 'KB', 'MB', 'GB'];\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n    },\n    async importTransactions() {\n      try {\n        console.log('Starting import with data:', {\n          transactionCount: this.transactions.length,\n          ignoreNegativeBalances: this.ignoreNegativeBalances,\n          userId: this.userId,\n          sampleTransaction: this.transactions[0]\n        });\n\n        const { data } = await axios.post('/api/transactions/import', {\n          transactions: this.transactions,\n          userId: this.userId,\n          ignoreNegativeBalances: this.ignoreNegativeBalances\n        }, {\n          timeout: 30000, // 30 seconds timeout\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        \n        console.log('Import response:', data);\n        \n        if (data.errors.length === 0) {\n          ElMessage.success(`✅ Import thành công ${data.success} giao dịch.`);\n          this.transactions = []; // Clear the table after successful import\n          this.currentFile = null; // Clear the current file\n        } else {\n          console.error('Import errors:', data.errors);\n          data.errors.forEach((error) => {\n            const transaction = this.transactions[error.index];\n            ElMessage.error(\n              `❌ Lỗi ở dòng ${error.index + 1} (${transaction.symbol}): ${error.error}`\n            );\n          });\n        }\n      } catch (error) {\n        console.error('Import error details:', {\n          message: error.message,\n          response: error.response?.data,\n          status: error.response?.status,\n          code: error.code\n        });\n        \n        let errorMessage = 'Không thể kết nối đến máy chủ. ';\n        \n        if (error.code === 'ECONNABORTED') {\n          errorMessage += 'Yêu cầu đã hết thời gian chờ. Vui lòng thử lại.';\n        } else if (!error.response) {\n          errorMessage += 'Vui lòng kiểm tra kết nối mạng và thử lại.';\n        } else if (error.response.status === 404) {\n          errorMessage += 'Không tìm thấy API endpoint. Vui lòng liên hệ admin.';\n        } else if (error.response.status === 500) {\n          errorMessage += 'Lỗi máy chủ. Vui lòng thử lại sau.';\n        } else {\n          errorMessage += error.response?.data?.error || \n                         error.response?.data?.details || \n                         error.message || \n                         'Đã xảy ra lỗi không xác định.';\n        }\n        \n        ElMessage.error(`❌ Lỗi import: ${errorMessage}`);\n      }\n    },\n    getBalanceClass({ row }) {\n      return row.runningBalance < 0 ? 'negative-balance' : '';\n    },\n    getTransactionsForSymbol(symbol) {\n      return this.transactions\n        .filter(t => t.symbol === symbol)\n        .sort((a, b) => new Date(a.tradeDate) - new Date(b.tradeDate));\n    },\n    formatPrice(price) {\n      return (price / 1000).toLocaleString('vi-VN', {\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 2\n      });\n    },\n    formatPercentage(value) {\n      if (value === null || value === undefined || value === 0) return '-';\n      return `${(value * 100).toLocaleString('vi-VN', {\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 2\n      })}%`;\n    }\n  }\n};\n</script>\n\n<style scoped>\n.transaction-uploader {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\n.upload-section {\n  margin-bottom: 30px;\n}\n\n.upload-area {\n  border: 2px dashed #dcdfe6;\n  border-radius: 8px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n  transition: all 0.3s;\n  background-color: #fafafa;\n  padding: 20px;\n}\n\n.upload-area:hover {\n  border-color: #409eff;\n  background-color: #f5f7fa;\n}\n\n.upload-content {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px 0;\n}\n\n.upload-icon {\n  font-size: 48px;\n  color: #c0c4cc;\n  margin-bottom: 16px;\n}\n\n.upload-text {\n  text-align: center;\n  margin-bottom: 16px;\n}\n\n.main-text {\n  font-size: 18px;\n  color: #303133;\n  margin-bottom: 8px;\n  font-weight: 500;\n}\n\n.sub-text {\n  font-size: 14px;\n  color: #909399;\n  margin-bottom: 12px;\n}\n\n.select-button {\n  padding: 12px 24px;\n  font-size: 14px;\n  border-radius: 4px;\n}\n\n.upload-tip {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  color: #909399;\n  font-size: 13px;\n  margin-top: 12px;\n}\n\n.upload-tip i {\n  font-size: 14px;\n  color: #909399;\n}\n\n.template-link {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  margin-top: 8px;\n  font-size: 13px;\n}\n\n.template-link i {\n  color: #409eff;\n  font-size: 14px;\n}\n\n.template-link a {\n  color: #409eff;\n  text-decoration: none;\n  transition: color 0.3s;\n}\n\n.template-link a:hover {\n  color: #66b1ff;\n  text-decoration: underline;\n}\n\n:deep(.el-upload) {\n  width: 100%;\n}\n\n:deep(.el-upload-dragger) {\n  width: 100%;\n  height: auto;\n  border: none;\n  background: transparent;\n}\n\n:deep(.el-upload-dragger:hover) {\n  background: transparent;\n}\n\n.file-info {\n  margin-top: 15px;\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n.file-actions {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 8px;\n  padding: 0 4px;\n}\n\n.file-size {\n  color: #606266;\n  font-size: 13px;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.file-size::before {\n  content: '';\n  display: inline-block;\n  width: 4px;\n  height: 4px;\n  background-color: #909399;\n  border-radius: 50%;\n}\n\n.transactions-section {\n  background: #fff;\n  border-radius: 8px;\n  padding: 20px;\n  box-shadow: 0 2px 12px 0 rgba(0,0,0,0.1);\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n  padding-bottom: 15px;\n  border-bottom: 1px solid #ebeef5;\n}\n\n.section-header h3 {\n  margin: 0;\n  color: #303133;\n  font-size: 18px;\n}\n\n.negative-balance {\n  background-color: #fff2f0;\n  color: #f56c6c;\n}\n\n.negative-balance-warning {\n  margin: 20px 0;\n  padding: 15px;\n  border: 1px solid #e6a23c;\n  border-radius: 4px;\n  background-color: #fdf6ec;\n}\n\n/* Responsive styles */\n@media (max-width: 768px) {\n  .section-header {\n    flex-direction: column;\n    gap: 10px;\n  }\n  \n  .section-header .el-button {\n    width: 100%;\n  }\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}